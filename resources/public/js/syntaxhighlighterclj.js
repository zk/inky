var XRegExp;if(XRegExp){throw Error("can't load XRegExp twice in the same frame")}(function(){XRegExp=function(pattern,flags){var output=[],currScope=XRegExp.OUTSIDE_CLASS,pos=0,context,tokenResult,match,chr,regex;if(XRegExp.isRegExp(pattern)){if(flags!==undefined){throw TypeError("can't supply flags when constructing one RegExp from another")}return clone(pattern)}if(isInsideConstructor){throw Error("can't call the XRegExp constructor within token definition functions")}flags=flags||"";context={hasNamedCapture:false,captureNames:[],hasFlag:function(flag){return flags.indexOf(flag)>-1},setFlag:function(flag){flags+=flag}};while(pos<pattern.length){tokenResult=runTokens(pattern,pos,currScope,context);if(tokenResult){output.push(tokenResult.output);pos+=(tokenResult.match[0].length||1)}else{if(match=real.exec.call(nativeTokens[currScope],pattern.slice(pos))){output.push(match[0]);pos+=match[0].length}else{chr=pattern.charAt(pos);if(chr==="["){currScope=XRegExp.INSIDE_CLASS}else{if(chr==="]"){currScope=XRegExp.OUTSIDE_CLASS}}output.push(chr);pos++}}}regex=RegExp(output.join(""),real.replace.call(flags,flagClip,""));regex._xregexp={source:pattern,captureNames:context.hasNamedCapture?context.captureNames:null};return regex};XRegExp.version="1.5.0";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var replacementToken=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,flagClip=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,quantifier=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,isInsideConstructor=false,tokens=[],real={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},compliantExecNpcg=real.exec.call(/()??/,"")[1]===undefined,compliantLastIndexIncrement=function(){var x=/^/g;real.test.call(x,"");return !x.lastIndex}(),compliantLastIndexReset=function(){var x=/x/g;real.replace.call("x",x,"");return !x.lastIndex}(),hasNativeY=RegExp.prototype.sticky!==undefined,nativeTokens={};nativeTokens[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;nativeTokens[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(regex,handler,scope,trigger){tokens.push({pattern:clone(regex,"g"+(hasNativeY?"y":"")),handler:handler,scope:scope||XRegExp.OUTSIDE_CLASS,trigger:trigger||null})};XRegExp.cache=function(pattern,flags){var key=pattern+"/"+(flags||"");return XRegExp.cache[key]||(XRegExp.cache[key]=XRegExp(pattern,flags))};XRegExp.copyAsGlobal=function(regex){return clone(regex,"g")};XRegExp.escape=function(str){return str.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(str,regex,pos,anchored){regex=clone(regex,"g"+((anchored&&hasNativeY)?"y":""));regex.lastIndex=pos=pos||0;var match=regex.exec(str);if(anchored){return(match&&match.index===pos)?match:null}else{return match}};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}};XRegExp.isRegExp=function(o){return Object.prototype.toString.call(o)==="[object RegExp]"};XRegExp.iterate=function(str,origRegex,callback,context){var regex=clone(origRegex,"g"),i=-1,match;while(match=regex.exec(str)){callback.call(context,match,++i,str,regex);if(regex.lastIndex===match.index){regex.lastIndex++}}if(origRegex.global){origRegex.lastIndex=0}};XRegExp.matchChain=function(str,chain){return function recurseChain(values,level){var item=chain[level].regex?chain[level]:{regex:chain[level]},regex=clone(item.regex,"g"),matches=[],i;for(i=0;i<values.length;i++){XRegExp.iterate(values[i],regex,function(match){matches.push(item.backref?(match[item.backref]||""):match[0])})}return((level===chain.length-1)||!matches.length)?matches:recurseChain(matches,level+1)}([str],0)};RegExp.prototype.apply=function(context,args){return this.exec(args[0])};RegExp.prototype.call=function(context,str){return this.exec(str)};RegExp.prototype.exec=function(str){var match=real.exec.apply(this,arguments),name,r2;if(match){if(!compliantExecNpcg&&match.length>1&&indexOf(match,"")>-1){r2=RegExp(this.source,real.replace.call(getNativeFlags(this),"g",""));real.replace.call(str.slice(match.index),r2,function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===undefined){match[i]=undefined}}})}if(this._xregexp&&this._xregexp.captureNames){for(var i=1;i<match.length;i++){name=this._xregexp.captureNames[i-1];if(name){match[name]=match[i]}}}if(!compliantLastIndexIncrement&&this.global&&!match[0].length&&(this.lastIndex>match.index)){this.lastIndex--}}return match};if(!compliantLastIndexIncrement){RegExp.prototype.test=function(str){var match=real.exec.call(this,str);if(match&&this.global&&!match[0].length&&(this.lastIndex>match.index)){this.lastIndex--}return !!match}}String.prototype.match=function(regex){if(!XRegExp.isRegExp(regex)){regex=RegExp(regex)}if(regex.global){var result=real.match.apply(this,arguments);regex.lastIndex=0;return result}return regex.exec(this)};String.prototype.replace=function(search,replacement){var isRegex=XRegExp.isRegExp(search),captureNames,result,str;if(isRegex&&typeof replacement.valueOf()==="string"&&replacement.indexOf("${")===-1&&compliantLastIndexReset){return real.replace.apply(this,arguments)}if(!isRegex){search=search+""}else{if(search._xregexp){captureNames=search._xregexp.captureNames}}if(typeof replacement==="function"){result=real.replace.call(this,search,function(){if(captureNames){arguments[0]=new String(arguments[0]);for(var i=0;i<captureNames.length;i++){if(captureNames[i]){arguments[0][captureNames[i]]=arguments[i+1]}}}if(isRegex&&search.global){search.lastIndex=arguments[arguments.length-2]+arguments[0].length}return replacement.apply(null,arguments)})}else{str=this+"";result=real.replace.call(str,search,function(){var args=arguments;return real.replace.call(replacement,replacementToken,function($0,$1,$2){if($1){switch($1){case"$":return"$";case"&":return args[0];case"`":return args[args.length-1].slice(0,args[args.length-2]);case"'":return args[args.length-1].slice(args[args.length-2]+args[0].length);default:var literalNumbers="";$1=+$1;if(!$1){return $0}while($1>args.length-3){literalNumbers=String.prototype.slice.call($1,-1)+literalNumbers;$1=Math.floor($1/10)}return($1?args[$1]||"":"$")+literalNumbers}}else{var n=+$2;if(n<=args.length-3){return args[n]}n=captureNames?indexOf(captureNames,$2):-1;return n>-1?args[n+1]:$0}})})}if(isRegex&&search.global){search.lastIndex=0}return result};String.prototype.split=function(s,limit){if(!XRegExp.isRegExp(s)){return real.split.apply(this,arguments)}var str=this+"",output=[],lastLastIndex=0,match,lastLength;if(limit===undefined||+limit<0){limit=Infinity}else{limit=Math.floor(+limit);if(!limit){return[]}}s=XRegExp.copyAsGlobal(s);while(match=s.exec(str)){if(s.lastIndex>lastLastIndex){output.push(str.slice(lastLastIndex,match.index));if(match.length>1&&match.index<str.length){Array.prototype.push.apply(output,match.slice(1))}lastLength=match[0].length;lastLastIndex=s.lastIndex;if(output.length>=limit){break}}if(s.lastIndex===match.index){s.lastIndex++}}if(lastLastIndex===str.length){if(!real.test.call(s,"")||lastLength){output.push("")}}else{output.push(str.slice(lastLastIndex))}return output.length>limit?output.slice(0,limit):output};function clone(regex,additionalFlags){if(!XRegExp.isRegExp(regex)){throw TypeError("type RegExp expected")}var x=regex._xregexp;regex=XRegExp(regex.source,getNativeFlags(regex)+(additionalFlags||""));if(x){regex._xregexp={source:x.source,captureNames:x.captureNames?x.captureNames.slice(0):null}}return regex}function getNativeFlags(regex){return(regex.global?"g":"")+(regex.ignoreCase?"i":"")+(regex.multiline?"m":"")+(regex.extended?"x":"")+(regex.sticky?"y":"")}function runTokens(pattern,index,scope,context){var i=tokens.length,result,match,t;isInsideConstructor=true;try{while(i--){t=tokens[i];if((scope&t.scope)&&(!t.trigger||t.trigger.call(context))){t.pattern.lastIndex=index;match=t.pattern.exec(pattern);if(match&&match.index===index){result={output:t.handler.call(context,match,scope),match:match};break}}}}catch(err){throw err}finally{isInsideConstructor=false}return result}function indexOf(array,item,from){if(Array.prototype.indexOf){return array.indexOf(item,from)}for(var i=from||0;i<array.length;i++){if(array[i]===item){return i}}return -1}XRegExp.addToken(/\(\?#[^)]*\)/,function(match){return real.test.call(quantifier,match.input.slice(match.index+match[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(match){this.captureNames.push(match[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(match){var index=indexOf(this.captureNames,match[1]);return index>-1?"\\"+(index+1)+(isNaN(match.input.charAt(match.index+match[0].length))?"":"(?:)"):match[0]});XRegExp.addToken(/\[\^?]/,function(match){return match[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(match){this.setFlag(match[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(match){return real.test.call(quantifier,match.input.slice(match.index+match[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();typeof(exports)!="undefined"?exports.XRegExp=XRegExp:null;if(typeof(SyntaxHighlighter)=="undefined"){var SyntaxHighlighter=function(){if(typeof(require)!="undefined"&&typeof(XRegExp)=="undefined"){XRegExp=require("XRegExp").XRegExp}var sh={defaults:{"class-name":"","first-line":1,"pad-line-numbers":false,highlight:null,title:null,"smart-tabs":true,"tab-size":4,gutter:true,toolbar:true,"quick-code":true,collapse:false,"auto-links":true,light:false,"html-script":false},config:{space:"&nbsp;",useScriptTags:true,bloggerMode:false,stripBrs:false,tagName:"pre",strings:{expandSource:"expand source",help:"?",alert:"SyntaxHighlighter\n\n",noBrush:"Can't find brush for: ",brushNotHtmlScript:"Brush wasn't configured for html-script option: ",aboutDialog:"@ABOUT@"}},vars:{discoveredBrushes:null,highlighters:{}},brushes:{},regexLib:{multiLineCComments:/\/\*[\s\S]*?\*\//gm,singleLineCComments:/\/\/.*$/gm,singleLinePerlComments:/#.*$/gm,doubleQuotedString:/"([^\\"\n]|\\.)*"/g,singleQuotedString:/'([^\\'\n]|\\.)*'/g,multiLineDoubleQuotedString:new XRegExp('"([^\\\\"]|\\\\.)*"',"gs"),multiLineSingleQuotedString:new XRegExp("'([^\\\\']|\\\\.)*'","gs"),xmlComments:/(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm,url:/\w+:\/\/[\w-.\/?%&=:@;]*/g,phpScriptTags:{left:/(&lt;|<)\?=?/g,right:/\?(&gt;|>)/g},aspScriptTags:{left:/(&lt;|<)%=?/g,right:/%(&gt;|>)/g},scriptScriptTags:{left:/(&lt;|<)\s*script.*?(&gt;|>)/gi,right:/(&lt;|<)\/\s*script\s*(&gt;|>)/gi}},toolbar:{getHtml:function(highlighter){var html='<div class="toolbar">',items=sh.toolbar.items,list=items.list;function defaultGetHtml(highlighter,name){return sh.toolbar.getButtonHtml(highlighter,name,sh.config.strings[name])}for(var i=0;i<list.length;i++){html+=(items[list[i]].getHtml||defaultGetHtml)(highlighter,list[i])}html+="</div>";return html},getButtonHtml:function(highlighter,commandName,label){return'<span><a href="#" class="toolbar_item command_'+commandName+" "+commandName+'">'+label+"</a></span>"},handler:function(e){var target=e.target,className=target.className||"";function getValue(name){var r=new RegExp(name+"_(\\w+)"),match=r.exec(className);return match?match[1]:null}var highlighter=getHighlighterById(findParentElement(target,".syntaxhighlighter").id),commandName=getValue("command");if(highlighter&&commandName){sh.toolbar.items[commandName].execute(highlighter)}e.preventDefault()},items:{list:["expandSource","help"],expandSource:{getHtml:function(highlighter){if(highlighter.getParam("collapse")!=true){return""}var title=highlighter.getParam("title");return sh.toolbar.getButtonHtml(highlighter,"expandSource",title?title:sh.config.strings.expandSource)},execute:function(highlighter){var div=getHighlighterDivById(highlighter.id);removeClass(div,"collapsed")}},help:{execute:function(highlighter){var wnd=popup("","_blank",500,250,"scrollbars=0"),doc=wnd.document;doc.write(sh.config.strings.aboutDialog);doc.close();wnd.focus()}}}},findElements:function(globalParams,element){var elements=element?[element]:toArray(document.getElementsByTagName(sh.config.tagName)),conf=sh.config,result=[];if(conf.useScriptTags){elements=elements.concat(getSyntaxHighlighterScriptTags())}if(elements.length===0){return result}for(var i=0;i<elements.length;i++){var item={target:elements[i],params:merge(globalParams,parseParams(elements[i].className))};if(item.params.brush==null){continue}result.push(item)}return result},highlight:function(globalParams,element){var elements=this.findElements(globalParams,element),propertyName="innerHTML",highlighter=null,conf=sh.config;if(elements.length===0){return}for(var i=0;i<elements.length;i++){var element=elements[i],target=element.target,params=element.params,brushName=params.brush,code;if(brushName==null){continue}if(params["html-script"]=="true"||sh.defaults["html-script"]==true){highlighter=new sh.HtmlScript(brushName);brushName="htmlscript"}else{var brush=findBrush(brushName);if(brush){highlighter=new brush()}else{continue}}code=target[propertyName];if(conf.useScriptTags){code=stripCData(code)}if((target.title||"")!=""){params.title=target.title}params.brush=brushName;highlighter.init(params);element=highlighter.getDiv(code);if((target.id||"")!=""){element.id=target.id}target.parentNode.replaceChild(element,target)}},all:function(params){attachEvent(window,"load",function(){sh.highlight(params)})}};function hasClass(target,className){return target.className.indexOf(className)!=-1}function addClass(target,className){if(!hasClass(target,className)){target.className+=" "+className}}function removeClass(target,className){target.className=target.className.replace(className,"")}function toArray(source){var result=[];for(var i=0;i<source.length;i++){result.push(source[i])}return result}function splitLines(block){return block.split("\n")}function getHighlighterId(id){var prefix="highlighter_";return id.indexOf(prefix)==0?id:prefix+id}function getHighlighterById(id){return sh.vars.highlighters[getHighlighterId(id)]}function getHighlighterDivById(id){return document.getElementById(getHighlighterId(id))}function storeHighlighter(highlighter){sh.vars.highlighters[getHighlighterId(highlighter.id)]=highlighter}function findElement(target,search,reverse){if(target==null){return null}var nodes=reverse!=true?target.childNodes:[target.parentNode],propertyToFind={"#":"id",".":"className"}[search.substr(0,1)]||"nodeName",expectedValue,found;expectedValue=propertyToFind!="nodeName"?search.substr(1):search.toUpperCase();if((target[propertyToFind]||"").indexOf(expectedValue)!=-1){return target}for(var i=0;nodes&&i<nodes.length&&found==null;i++){found=findElement(nodes[i],search,reverse)}return found}function findParentElement(target,className){return findElement(target,className,true)}function indexOf(array,searchElement,fromIndex){fromIndex=Math.max(fromIndex||0,0);for(var i=fromIndex;i<array.length;i++){if(array[i]==searchElement){return i}}return -1}function guid(prefix){return(prefix||"")+Math.round(Math.random()*1000000).toString()}function merge(obj1,obj2){var result={},name;for(name in obj1){result[name]=obj1[name]}for(name in obj2){result[name]=obj2[name]}return result}function toBoolean(value){var result={"true":true,"false":false}[value];return result==null?value:result}function popup(url,name,width,height,options){var x=(screen.width-width)/2,y=(screen.height-height)/2;options+=", left="+x+", top="+y+", width="+width+", height="+height;options=options.replace(/^,/,"");var win=window.open(url,name,options);win.focus();return win}function attachEvent(obj,type,func,scope){function handler(e){e=e||window.event;if(!e.target){e.target=e.srcElement;e.preventDefault=function(){this.returnValue=false}}func.call(scope||window,e)}if(obj.attachEvent){obj.attachEvent("on"+type,handler)}else{obj.addEventListener(type,handler,false)}}function alert(str){window.alert(sh.config.strings.alert+str)}function findBrush(alias,showAlert){var brushes=sh.vars.discoveredBrushes,result=null;if(brushes==null){brushes={};for(var brush in sh.brushes){var info=sh.brushes[brush],aliases=info.aliases;if(aliases==null){continue}info.brushName=brush.toLowerCase();for(var i=0;i<aliases.length;i++){brushes[aliases[i]]=brush}}sh.vars.discoveredBrushes=brushes}result=sh.brushes[brushes[alias]];if(result==null&&showAlert!=false){alert(sh.config.strings.noBrush+alias)}return result}function eachLine(str,callback){var lines=splitLines(str);for(var i=0;i<lines.length;i++){lines[i]=callback(lines[i],i)}return lines.join("\n")}function trimFirstAndLastLines(str){return str.replace(/^[ ]*[\n]+|[\n]*[ ]*$/g,"")}function parseParams(str){var match,result={},arrayRegex=new XRegExp("^\\[(?<values>(.*?))\\]$"),regex=new XRegExp("(?<name>[\\w-]+)\\s*:\\s*(?<value>[\\w-%#]+|\\[.*?\\]|\".*?\"|'.*?')\\s*;?","g");while((match=regex.exec(str))!=null){var value=match.value.replace(/^['"]|['"]$/g,"");if(value!=null&&arrayRegex.test(value)){var m=arrayRegex.exec(value);value=m.values.length>0?m.values.split(/\s*,\s*/):[]}result[match.name]=value}return result}function wrapLinesWithCode(str,css){if(str==null||str.length==0||str=="\n"){return str}str=str.replace(/</g,"&lt;");str=str.replace(/ {2,}/g,function(m){var spaces="";for(var i=0;i<m.length-1;i++){spaces+=sh.config.space}return spaces+" "});if(css!=null){str=eachLine(str,function(line){if(line.length==0){return""}var spaces="";line=line.replace(/^(&nbsp;| )+/,function(s){spaces=s;return""});if(line.length==0){return spaces}return spaces+'<code class="'+css+'">'+line+"</code>"})}return str}function padNumber(number,length){var result=number.toString();while(result.length<length){result="0"+result}return result}function processTabs(code,tabSize){var tab="";for(var i=0;i<tabSize;i++){tab+=" "}return code.replace(/\t/g,tab)}function processSmartTabs(code,tabSize){var lines=splitLines(code),tab="\t",spaces="";for(var i=0;i<50;i++){spaces+="                    "}function insertSpaces(line,pos,count){return line.substr(0,pos)+spaces.substr(0,count)+line.substr(pos+1,line.length)}code=eachLine(code,function(line){if(line.indexOf(tab)==-1){return line}var pos=0;while((pos=line.indexOf(tab))!=-1){var spaces=tabSize-pos%tabSize;line=insertSpaces(line,pos,spaces)}return line});return code}function fixInputString(str){var br=/<br\s*\/?>|&lt;br\s*\/?&gt;/gi;if(sh.config.bloggerMode==true){str=str.replace(br,"\n")}if(sh.config.stripBrs==true){str=str.replace(br,"")}return str}function trim(str){return str.replace(/^\s+|\s+$/g,"")}function unindent(str){var lines=splitLines(fixInputString(str)),indents=new Array(),regex=/^\s*/,min=1000;for(var i=0;i<lines.length&&min>0;i++){var line=lines[i];if(trim(line).length==0){continue}var matches=regex.exec(line);if(matches==null){return str}min=Math.min(matches[0].length,min)}if(min>0){for(var i=0;i<lines.length;i++){lines[i]=lines[i].substr(min)}}return lines.join("\n")}function matchesSortCallback(m1,m2){if(m1.index<m2.index){return -1}else{if(m1.index>m2.index){return 1}else{if(m1.length<m2.length){return -1}else{if(m1.length>m2.length){return 1}}}}return 0}function getMatches(code,regexInfo){function defaultAdd(match,regexInfo){return match[0]}var index=0,match=null,matches=[],func=regexInfo.func?regexInfo.func:defaultAdd;while((match=regexInfo.regex.exec(code))!=null){var resultMatch=func(match,regexInfo);if(typeof(resultMatch)=="string"){resultMatch=[new sh.Match(resultMatch,match.index,regexInfo.css)]}matches=matches.concat(resultMatch)}return matches}function processUrls(code){var gt=/(.*)((&gt;|&lt;).*)/;return code.replace(sh.regexLib.url,function(m){var suffix="",match=null;if(match=gt.exec(m)){m=match[1];suffix=match[2]}return'<a href="'+m+'">'+m+"</a>"+suffix})}function getSyntaxHighlighterScriptTags(){var tags=document.getElementsByTagName("script"),result=[];for(var i=0;i<tags.length;i++){if(tags[i].type=="syntaxhighlighter"){result.push(tags[i])}}return result}function stripCData(original){var left="<![CDATA[",right="]]>",copy=trim(original),changed=false,leftLength=left.length,rightLength=right.length;if(copy.indexOf(left)==0){copy=copy.substring(leftLength);changed=true}var copyLength=copy.length;if(copy.indexOf(right)==copyLength-rightLength){copy=copy.substring(0,copyLength-rightLength);changed=true}return changed?copy:original}function quickCodeHandler(e){var target=e.target,highlighterDiv=findParentElement(target,".syntaxhighlighter"),container=findParentElement(target,".container"),textarea=document.createElement("textarea"),highlighter;if(!container||!highlighterDiv||findElement(container,"textarea")){return}highlighter=getHighlighterById(highlighterDiv.id);addClass(highlighterDiv,"source");var lines=container.childNodes,code=[];for(var i=0;i<lines.length;i++){code.push(lines[i].innerText||lines[i].textContent)}code=code.join("\r");textarea.appendChild(document.createTextNode(code));container.appendChild(textarea);textarea.focus();textarea.select();attachEvent(textarea,"blur",function(e){textarea.parentNode.removeChild(textarea);removeClass(highlighterDiv,"source")})}sh.Match=function(value,index,css){this.value=value;this.index=index;this.length=value.length;this.css=css;this.brushName=null};sh.Match.prototype.toString=function(){return this.value};sh.HtmlScript=function(scriptBrushName){var brushClass=findBrush(scriptBrushName),scriptBrush,xmlBrush=new sh.brushes.Xml(),bracketsRegex=null,ref=this,methodsToExpose="getDiv getHtml init".split(" ");if(brushClass==null){return}scriptBrush=new brushClass();for(var i=0;i<methodsToExpose.length;i++){(function(){var name=methodsToExpose[i];ref[name]=function(){return xmlBrush[name].apply(xmlBrush,arguments)}})()}if(scriptBrush.htmlScript==null){alert(sh.config.strings.brushNotHtmlScript+scriptBrushName);return}xmlBrush.regexList.push({regex:scriptBrush.htmlScript.code,func:process});function offsetMatches(matches,offset){for(var j=0;j<matches.length;j++){matches[j].index+=offset}}function process(match,info){var code=match.code,matches=[],regexList=scriptBrush.regexList,offset=match.index+match.left.length,htmlScript=scriptBrush.htmlScript,result;for(var i=0;i<regexList.length;i++){result=getMatches(code,regexList[i]);offsetMatches(result,offset);matches=matches.concat(result)}if(htmlScript.left!=null&&match.left!=null){result=getMatches(match.left,htmlScript.left);offsetMatches(result,match.index);matches=matches.concat(result)}if(htmlScript.right!=null&&match.right!=null){result=getMatches(match.right,htmlScript.right);offsetMatches(result,match.index+match[0].lastIndexOf(match.right));matches=matches.concat(result)}for(var j=0;j<matches.length;j++){matches[j].brushName=brushClass.brushName}return matches}};sh.Highlighter=function(){};sh.Highlighter.prototype={getParam:function(name,defaultValue){var result=this.params[name];return toBoolean(result==null?defaultValue:result)},create:function(name){return document.createElement(name)},findMatches:function(regexList,code){var result=[];if(regexList!=null){for(var i=0;i<regexList.length;i++){if(typeof(regexList[i])=="object"){result=result.concat(getMatches(code,regexList[i]))}}}return this.removeNestedMatches(result.sort(matchesSortCallback))},removeNestedMatches:function(matches){for(var i=0;i<matches.length;i++){if(matches[i]===null){continue}var itemI=matches[i],itemIEndPos=itemI.index+itemI.length;for(var j=i+1;j<matches.length&&matches[i]!==null;j++){var itemJ=matches[j];if(itemJ===null){continue}else{if(itemJ.index>itemIEndPos){break}else{if(itemJ.index==itemI.index&&itemJ.length>itemI.length){matches[i]=null}else{if(itemJ.index>=itemI.index&&itemJ.index<itemIEndPos){matches[j]=null}}}}}}return matches},figureOutLineNumbers:function(code){var lines=[],firstLine=parseInt(this.getParam("first-line"));eachLine(code,function(line,index){lines.push(index+firstLine)});return lines},isLineHighlighted:function(lineNumber){var list=this.getParam("highlight",[]);if(typeof(list)!="object"&&list.push==null){list=[list]}return indexOf(list,lineNumber.toString())!=-1},getLineHtml:function(lineIndex,lineNumber,code){var classes=["line","number"+lineNumber,"index"+lineIndex,"alt"+(lineNumber%2==0?1:2).toString()];if(this.isLineHighlighted(lineNumber)){classes.push("highlighted")}if(lineNumber==0){classes.push("break")}return'<div class="'+classes.join(" ")+'">'+code+"</div>"},getLineNumbersHtml:function(code,lineNumbers){var html="",count=splitLines(code).length,firstLine=parseInt(this.getParam("first-line")),pad=this.getParam("pad-line-numbers");if(pad==true){pad=(firstLine+count-1).toString().length}else{if(isNaN(pad)==true){pad=0}}for(var i=0;i<count;i++){var lineNumber=lineNumbers?lineNumbers[i]:firstLine+i,code=lineNumber==0?sh.config.space:padNumber(lineNumber,pad);html+=this.getLineHtml(i,lineNumber,code)}return html},getCodeLinesHtml:function(html,lineNumbers){html=trim(html);var lines=splitLines(html),padLength=this.getParam("pad-line-numbers"),firstLine=parseInt(this.getParam("first-line")),html="",brushName=this.getParam("brush");for(var i=0;i<lines.length;i++){var line=lines[i],indent=/^(&nbsp;|\s)+/.exec(line),spaces=null,lineNumber=lineNumbers?lineNumbers[i]:firstLine+i;if(indent!=null){spaces=indent[0].toString();line=line.substr(spaces.length);spaces=spaces.replace(" ",sh.config.space)}line=trim(line);if(line.length==0){line=sh.config.space}html+=this.getLineHtml(i,lineNumber,(spaces!=null?'<code class="'+brushName+' spaces">'+spaces+"</code>":"")+line)}return html},getTitleHtml:function(title){return title?"<caption>"+title+"</caption>":""},getMatchesHtml:function(code,matches){var pos=0,result="",brushName=this.getParam("brush","");function getBrushNameCss(match){var result=match?(match.brushName||brushName):brushName;return result?result+" ":""}for(var i=0;i<matches.length;i++){var match=matches[i],matchBrushName;if(match===null||match.length===0){continue}matchBrushName=getBrushNameCss(match);result+=wrapLinesWithCode(code.substr(pos,match.index-pos),matchBrushName+"plain")+wrapLinesWithCode(match.value,matchBrushName+match.css);pos=match.index+match.length+(match.offset||0)}result+=wrapLinesWithCode(code.substr(pos),getBrushNameCss()+"plain");return result},getHtml:function(code){var html="",classes=["syntaxhighlighter"],tabSize,matches,lineNumbers;if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}className="syntaxhighlighter";if(this.getParam("collapse")==true){classes.push("collapsed")}if((gutter=this.getParam("gutter"))==false){classes.push("nogutter")}classes.push(this.getParam("class-name"));classes.push(this.getParam("brush"));code=trimFirstAndLastLines(code).replace(/\r/g," ");tabSize=this.getParam("tab-size");code=this.getParam("smart-tabs")==true?processSmartTabs(code,tabSize):processTabs(code,tabSize);code=unindent(code);if(gutter){lineNumbers=this.figureOutLineNumbers(code)}matches=this.findMatches(this.regexList,code);html=this.getMatchesHtml(code,matches);html=this.getCodeLinesHtml(html,lineNumbers);if(this.getParam("auto-links")){html=processUrls(html)}if(typeof(navigator)!="undefined"&&navigator.userAgent&&navigator.userAgent.match(/MSIE/)){classes.push("ie")}html='<div id="'+getHighlighterId(this.id)+'" class="'+classes.join(" ")+'">'+(this.getParam("toolbar")?sh.toolbar.getHtml(this):"")+'<table border="0" cellpadding="0" cellspacing="0">'+this.getTitleHtml(this.getParam("title"))+"<tbody><tr>"+(gutter?'<td class="gutter">'+this.getLineNumbersHtml(code)+"</td>":"")+'<td class="code"><div class="container">'+html+"</div></td></tr></tbody></table></div>";return html},getDiv:function(code){if(code===null){code=""}this.code=code;var div=this.create("div");div.innerHTML=this.getHtml(code);if(this.getParam("toolbar")){attachEvent(findElement(div,".toolbar"),"click",sh.toolbar.handler)}if(this.getParam("quick-code")){attachEvent(findElement(div,".code"),"dblclick",quickCodeHandler)}return div},init:function(params){this.id=guid();storeHighlighter(this);this.params=merge(sh.defaults,params||{});if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}},getKeywords:function(str){str=str.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|");return"\\b(?:"+str+")\\b"},forHtmlScript:function(regexGroup){this.htmlScript={left:{regex:regexGroup.left,css:"script"},right:{regex:regexGroup.right,css:"script"},code:new XRegExp("(?<left>"+regexGroup.left.source+")(?<code>.*?)(?<right>"+regexGroup.right.source+")","sgi")}}};return sh}()}typeof(exports)!="undefined"?exports.SyntaxHighlighter=SyntaxHighlighter:null;if(typeof net=="undefined"){net={}}if(!(net.brehaut)){net.brehaut={}}net.brehaut.ClojureTools=(function(SH){if(!Object.create){Object.create=function object(o){function F(){}F.prototype=o;return new F()}}function Token(value,index,tag,length){this.value=value;this.index=index;this.length=length||value.length;this.tag=tag;this.secondary_tags={}}var null_token=new Token("",-1,"null",-1);function LispNode(tag,children,opening){this.tag=tag;this.parent=null;this.list=children;this.opening=opening;this.closing=null_token;this.meta=null}var null_lispnode=new LispNode("null",[],null_token);function PrefixNode(tag,token,attached_node){this.tag=tag;this.token=token;this.attached_node=attached_node;this.parent=null}function tokenize(code){var tokens=[];var tn=0;var zero="0".charCodeAt(0);var nine="9".charCodeAt(0);var lower_a="a".charCodeAt(0);var lower_f="f".charCodeAt(0);var upper_a="A".charCodeAt(0);var upper_f="F".charCodeAt(0);var dispatch=false;for(var i=0,extent=i,j=code.length;i<j&&extent<=j;){var c=code[i];if(dispatch){i--}switch(c){case"#":dispatch=true;i++;extent++;continue;case" ":case"\t":case"\n":case"\r":case",":extent++;break;case"^":case"`":case")":case"[":case"]":case"}":case"@":tokens[tn++]=new Token(c,i,c,++extent-i);break;case"'":tokens[tn++]=new Token(code.slice(i,++extent),i,dispatch?"#'":"'",extent-i);break;case"(":tokens[tn++]=new Token(code.slice(i,++extent),i,dispatch?"#(":"(",extent-i);break;case"{":tokens[tn++]=new Token(code.slice(i,++extent),i,dispatch?"#{":"{",extent-i);break;case"\\":if(code.slice(i+1,i+8)==="newline"){tokens[tn++]=new Token("\\newline",i,"value",8);extent=i+9}else{if(code.slice(i+1,i+6)==="space"){tokens[tn++]=new Token("\\space",i,"value",6);extent=i+6}else{if(code.slice(i+1,i+4)==="tab"){tokens[tn++]=new Token("\\tab",i,"value",4);extent=i+5}else{if(code.slice(i+1,i+6)==="&amp;"){tokens[tn++]=new Token("\\&amp;",i,"value",6);extent=i+6}else{if(code.slice(i+1,i+5)==="&lt;"){tokens[tn++]=new Token("\\&lt;",i,"value",5);extent=i+5}else{if(code.slice(i+1,i+5)==="&gt;"){tokens[tn++]=new Token("\\&gt;",i,"value",5);extent=i+5}else{extent+=2;tokens[tn++]=new Token(code.slice(i,extent),i,"value",2)}}}}}}break;case"~":if(code[i+1]==="@"){extent+=2;tokens[tn++]=new Token(code.slice(i,extent),i,"splice",2)}else{tokens[tn++]=new Token(code.slice(i,++extent),i,"unquote",2)}break;case'"':for(extent++;extent<=j;extent++){if(code[extent]==="\\"){extent++}else{if(code[extent]==='"'){break}}}tokens[tn++]=new Token(code.slice(i,++extent),i,dispatch?"regexp":"string",extent-i);break;case";":for(;extent<=j&&code[extent]!=="\n"&&code[extent]!=="\r";extent++){}tokens[tn++]=new Token(code.slice(i,++extent),i,"comments",extent-i);break;case"+":case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var c2=code.charCodeAt(i+1);if(((c==="+"||c==="-")&&(c2>=zero&&c2<=nine))||(c!=="+"&&c!=="-")){if(c==="+"||c==="-"){extent++}for(;extent<=j;extent++){var charCode=code.charCodeAt(extent);if(charCode<zero||charCode>nine){break}}c=code[extent];c2=code.charCodeAt(extent+1);if((c==="r"||c==="R"||c==="/"||c===".")&&(c2>=zero&&c2<=nine)){for(extent++;extent<=j;extent++){var charCode=code.charCodeAt(extent);if(charCode<zero||charCode>nine){break}}}c=code[extent];c2=code.charCodeAt(extent+1);if((c==="x"||c==="X")&&((c2>=zero&&c2<=nine)||(c2>=lower_a&&c2<=lower_f)||(c2>=upper_a&&c2<=upper_f))){for(extent++;extent<=j;extent++){var charCode=code.charCodeAt(extent);if(((charCode>=zero&&charCode<=nine)||(charCode>=lower_a&&charCode<=lower_f)||(charCode>=upper_a&&charCode<=upper_f))){continue}break}}c=code[extent];c2=code.charCodeAt(extent+1);if((c==="e"||c==="E")&&(c2>=zero&&c2<=nine)){for(extent++;extent<=j;extent++){var charCode=code.charCodeAt(extent);if(charCode<zero||charCode>nine){break}}}c=code[extent];if(c==="N"||c==="M"){extent++}tokens[tn++]=new Token(code.slice(i,extent),i,"value",extent-i);break}case"_":if(dispatch&&c==="_"){tokens[tn++]=new Token(code.slice(i,++extent),i,"skip",extent-i);break}default:for(extent++;extent<=j;extent++){switch(code[extent]){case" ":case"\t":case"\n":case"\r":case"\\":case",":case"{":case"}":case"(":case")":case"[":case"]":case"^":case"`":case"@":break;case";":if(code.slice(extent-3,extent+1)==="&lt;"||code.slice(extent-3,extent+1)==="&gt;"||code.slice(extent-4,extent+1)==="&amp;"){continue}break;default:continue}break}var value=code.slice(i,extent);var tag="symbol";if(value[0]==":"){tag="keyword"}else{if(value==="true"||value==="false"||value==="nil"){tag="value"}}tokens[tn++]=new Token(value,i,tag,extent-i)}dispatch=false;i=extent}return tokens}function build_tree(tokens){var toplevel={list:[],tag:"toplevel",parent:null,opening:null,closing:null,depth:-1};var i=-1;var j=tokens.length;var short_fn=false;function parse_one(t){for(;t&&(t.tag==="comments"||t.tag==="invalid"||t.tag=="skip")&&i<j;){if(t.tag==="skip"){t.tag="preprocessor";annotate_comment(parse_one(tokens[++i]))}t=tokens[++i]}if(!t){return{}}switch(t.tag){case"{":return build_aggregate(new LispNode("map",[],t),"}");case"(":return build_aggregate(new LispNode("list",[],t),")");case"#{":return build_aggregate(new LispNode("set",[],t),"}");case"[":return build_aggregate(new LispNode("vector",[],t),"]");case"#(":var prev_short_fn=short_fn;try{short_fn=true;var aggregate=build_aggregate(new LispNode("list",[],t),")");if(prev_short_fn){aggregate.opening.tag="invalid";aggregate.closing.tag="invalid"}return aggregate}finally{short_fn=prev_short_fn}case"'":return new PrefixNode("quote",t,parse_one(tokens[++i]));case"#'":return new PrefixNode("varquote",t,parse_one(tokens[++i]));case"@":return new PrefixNode("deref",t,parse_one(tokens[++i]));case"`":return new PrefixNode("syntaxquote",t,parse_one(tokens[++i]));case"unquote":return new PrefixNode("unquote",t,parse_one(tokens[++i]));case"splice":return new PrefixNode("splice",t,parse_one(tokens[++i]));case"^":t.tag="meta";var meta=parse_one(tokens[++i]);var next=parse_one(tokens[++i]);next.meta=meta;return next}return t}function build_aggregate(current,expected_closing){for(i++;i<j;i++){var t=tokens[i];if(t.tag==="}"||t.tag===")"||t.tag==="]"){if(t.tag!==expected_closing){t.tag="invalid"}current.closing=t;if(expected_closing){return current}}var node=parse_one(t);node.parent=current;current.list[current.list.length]=node}return current}build_aggregate(toplevel,null);return toplevel}var show_locals=true;function annotate_comment(exp){exp.tag="comments";if(exp.list){exp.opening.tag="comments";exp.closing.tag="comments";for(var i=0;i<exp.list.length;i++){var child=exp.list[i];if(child.list){annotate_comment(child)}if(child.attached_node){annotate_comment(child.attached_node)}else{child.tag="comments"}}}}var annotation_rules={};function register_annotation_rule(names,rule){for(var i=0;i<names.length;i++){annotation_rules[names[i]]=rule}}function annotate_destructuring(exp,scope){if(exp.list){if(exp.tag==="vector"){for(var i=0;i<exp.list.length;i++){annotate_destructuring(exp.list[i],scope)}}else{if(exp.tag==="map"){for(var i=0;i<exp.list.length;i+=2){var key=exp.list[i];var val=exp.list[i+1];if(key.tag==="keyword"&&val.tag==="vector"){for(var ii=0,jj=val.list.length;ii<jj;ii++){if(val.list[ii].tag!=="symbol"){continue}val.list[ii].tag="variable";scope[val.list[ii].value]=true}}else{annotate_destructuring(key,scope);annotate_expressions(val,scope)}}}}}else{if(exp.tag==="symbol"&&(exp.value!=="&"&&exp.value!=="&amp;")){exp.tag="variable";scope[exp.value]=true}}}function _annotate_binding_vector(exp,scope){if(exp.tag!=="vector"){return}var bindings=exp.list;if(bindings.length%2===1){return}for(var i=0;i<bindings.length;i+=2){annotate_destructuring(bindings[i],scope);annotate_expressions(bindings[i+1],scope)}}function annotate_binding(exp,scope){var bindings=exp.list[1];if(!show_locals){return}if(bindings){scope=Object.create(scope);_annotate_binding_vector(bindings,scope)}for(var i=2;i<exp.list.length;i++){annotate_expressions(exp.list[i],scope)}}function _annotate_function_body(exp,scope,start_idx){var argvec=exp.list[start_idx];if(argvec.tag!=="vector"){return}scope=Object.create(scope);for(var i=0,j=argvec.list.length;i<j;i++){annotate_destructuring(argvec.list[i],scope)}for(var i=start_idx,j=exp.list.length;i<j;i++){annotate_expressions(exp.list[i],scope)}}function annotate_function(exp,scope){for(var i=1,j=exp.list.length;i<j;i++){var child=exp.list[i];if(child.tag==="vector"){_annotate_function_body(exp,scope,i);return}else{if(child.tag==="list"){_annotate_function_body(child,scope,0)}}}}function annotate_letfn(exp,scope){scope=Object.create(scope);var bindings=exp.list[1];var fn;for(var i=0,j=bindings.list.length;i<j;i++){fn=bindings.list[i];if(!fn.list[0]){continue}fn.list[0].tag="variable";scope[fn.list[0].value]=true}for(i=0,j=bindings.list.length;i<j;i++){var fn=bindings.list[i];annotate_function(fn,scope)}for(i=2,j=exp.list.length;i<j;i++){annotate_expressions(exp.list[i],scope)}}register_annotation_rule(["comment"],annotate_comment);register_annotation_rule(["let","when-let","if-let","binding","doseq","for","dotimes","let*"],annotate_binding);register_annotation_rule(["defn","defn-","fn","bound-fn","defmacro","fn*","defmethod"],annotate_function);register_annotation_rule(["letfn"],annotate_letfn);function _annotate_metadata_recursive(meta,scope){if(!meta){return}if(meta.list!==undefined&&meta.list!==null){for(var i=0,j=meta.list.length;i<j;i++){meta.opening.secondary_tags.meta=true;meta.closing.secondary_tags.meta=true;_annotate_metadata_recursive(meta.list[i],scope)}}else{if(meta.attached_node){meta.token.secondary_tags.meta=true;_annotate_metadata_recursive(meta.attached_node,scope)}else{meta.secondary_tags.meta=true}}}function annotate_metadata(exp){if(!(exp&&exp.meta)){return}var meta=exp.meta;annotate_expressions(meta,{});_annotate_metadata_recursive(meta,{})}function annotate_quoted(exp,scope){if(!exp){return}if(exp.list!==undefined&&exp.list!==null){for(var i=0,j=exp.list.length;i<j;i++){exp.opening.secondary_tags.quoted=true;exp.closing.secondary_tags.quoted=true;annotate_quoted(exp.list[i],scope)}}else{if(exp.attached_node){if(exp.tag==="unquote"||exp.tag==="splice"){return}exp.token.secondary_tags.quoted=true;annotate_quoted(exp.attached_node,scope)}else{exp.secondary_tags.quoted=true}}}function annotate_expressions(exp,scope){annotate_metadata(exp);switch(exp.tag){case"toplevel":for(var i=0;i<exp.list.length;i++){annotate_expressions(exp.list[i],scope)}break;case"list":var head=exp.list[0];if(head){if(head.tag==="list"||head.tag==="vector"||head.tag==="map"||head.tag==="set"){annotate_expressions(head,scope)}else{if(head.attached_node){annotate_expressions(head.attached_node,scope)}else{head.tag=(head.value.match(/(^\.)|(\.$)|[A-Z].*\//)?"method":"function")}}if(annotation_rules.hasOwnProperty(head.value)){annotation_rules[head.value](exp,scope)}else{for(var i=1;i<exp.list.length;i++){annotate_expressions(exp.list[i],scope)}}}else{exp.opening.tag="value";exp.closing.tag="value"}break;case"vector":case"map":case"set":for(var i=0;i<exp.list.length;i++){annotate_expressions(exp.list[i],scope)}break;case"symbol":if(exp.value.match(/[A-Z].*\/[A-Z_]+/)){exp.tag="constant"}else{if(show_locals&&scope[exp.value]){exp.tag="variable"}else{if(exp.tag==="symbol"&&exp.value.match(/([A-Z].*\/)?[A-Z_]+/)){exp.tag="type"}}}break;case"quote":case"syntaxquote":annotate_quoted(exp.attached_node,scope);default:if(exp.attached_node){annotate_expressions(exp.attached_node,scope)}}}var css_translation={constant:"constants",keyword:"constants",method:"color1",type:"color3","function":"functions",string:"string",regexp:"string",value:"value",comments:"comments",symbol:"symbol",variable:"variable",splice:"preprocessor",unquote:"preprocessor",preprocessor:"preprocessor",meta:"preprocessor","'":"preprocessor","#'":"preprocessor","(":"plain",")":"plain","{":"keyword","}":"keyword","#{":"keyword","[":"keyword","]":"keyword",invalid:"invalid","@":"plain"};function translate_tags_to_css(tokens){for(var i=0,j=tokens.length;i<j;i++){var token=tokens[i];token.css=css_translation[token.tag];for(var k in token.secondary_tags){if(token.secondary_tags.hasOwnProperty(k)){token.css+=" "+k}}}}SH.brushes.Clojure=function(){};SH.brushes.Clojure.prototype=new SyntaxHighlighter.Highlighter();SH.brushes.Clojure.prototype.findMatches=function find_matches(regexpList,code){if(this.params&&this.params.locals){show_locals=this.params.locals===true||this.params.locals==="true"}else{show_locals=true}var tokens=tokenize(code);annotate_expressions(build_tree(tokens),{});translate_tags_to_css(tokens);return tokens};SH.brushes.Clojure.aliases=["clojure","Clojure","clj"];SH.brushes.Clojure.register_annotation_rule=register_annotation_rule;return{tokenize:tokenize,build_tree:build_tree}})(SyntaxHighlighter);
